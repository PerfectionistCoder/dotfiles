font-text1: &font-text1 "Monospace:pixelsize=12:weight=bold"
font-text2: &font-text2 "Monospace:pixelsize=14:weight=bold"
font-icon1: &font-icon1 "Monospace:pixelsize=14"
font-icon2: &font-icon2 "Monospace:pixelsize=16"

color-base: &color-base "{{.colors.desktop.base}}ff"
color-text: &color-text "{{.colors.desktop.text}}ff"
color-active: &color-active "{{.colors.desktop.text}}ff"
color-inactive: &color-inactive "{{.colors.desktop.subtext0}}ff"

margin: &margin 8

bar:
  height: 20
  location: top
  background: *color-base
  font: *font-text1
  foreground: *color-text

  left:
    - river:
        anchors:
          0: &tag { text: "{id}", margin: 10 }
        title: { string: { text: "  {mode}", margin: *margin } }
        content:
          map:
            conditions:
              id <= 5:
                map:
                  default:
                    string: { foreground: *color-inactive, <<: *tag }
                  conditions:
                    focused:
                      string:
                        foreground: *color-base
                        deco: { background: { color: *color-active } }
                        <<: *tag
                    occupied:
                      string: { <<: *tag }

  center:
    - clock:
        content:
          string: { text: "{date} {time}", font: *font-text2 }
        time-format: "%H:%M"
        date-format: "%A%e %b"

  right:
    - pipewire:
        content:
          map:
            margin: *margin
            conditions:
              type == "sink":
                map:
                  conditions:
                    muted:
                      - string: { text: "󰝟 ", font: *font-icon2 }
                      - string:
                          {
                            text: "{cubic_volume}%",
                            foreground: *color-inactive,
                          }
                    ~muted:
                      - string: { text: "󰕾 ", font: *font-icon2 }
                      - string: { text: "{cubic_volume}%" }
    - network:
        anchors:
          0: &icon { font: *font-icon1 }
        poll-interval: 3000
        content:
          map:
            margin: *margin
            conditions:
              name == "wlp4s0":
                map:
                  conditions:
                    state == "down":
                      - string: { text: "󰤮 ", <<: *icon }
                      - string: { text: "Disconnected" }
                    quality > 0:
                      - ramp:
                          tag: quality
                          items:
                            - string: { text: "󰤯 ", <<: *icon }
                            - string: { text: "󰤟 ", <<: *icon }
                            - string: { text: "󰤢 ", <<: *icon }
                            - string: { text: "󰤥 ", <<: *icon }
                            - string: { text: "󰤨 ", <<: *icon }
                      - string: { text: "{ssid}" }
